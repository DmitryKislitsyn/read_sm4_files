Modification by Dmitry Kislitsyn (dmitryk@uoregon.edu) of original code by Martín Caldarola (caldarola@df.uba.ar or caldarolamartin@gmail.com)
10/31/2013

Note: 
Modifications were needed to read sm4 files generated by Rev9 ver.4.0.0.2
This is preliminary version, I'm planing to perform some more work as stated below

Found problems:
-fixed a problem with an offset for "Text String" reading due to varing number of Objects stored after the Page Header (>9)
-fixed a problem with an offset in read_data() function that caused data to be read with one byte shift
-added reading of Spectral Data to metadata which contains coordinates of point where spectroscopy is taken
-found a minor bug in line_type(6).name assignment - still needed to be fixed
-object_type names assignment need to be reviewed

Plans:
-provide better explanations and comments on what's done
-convince RHK to include all settings of acquisition in sm4 file and add a code for reading them
-review reading coordinates for dI/dV spectroscopy maps (haven't look at this yet)
-modify read_files_sm4 to recognize topography/spectroscopy automatically

Acknowledgements:
-thanks to Martín Caldarola for writing great code and sharing it
-thanks to Kenneth Kollin (kkollin@rhk-tech.com) for providing SM4 files documentation and helping to contact Philip Egberts
-thanks to Philip Egberts (pgsegber@ucalgary.ca) for sharing his matlab sm4-reading scripts which helped me a lot in understanding how binary files reading works and the structure of sm4 files
 
==============
﻿read_sm4_files
==============

Summary: A MATLAB code to read the proprietary files sm4 from RHK technology. 
--------

The general idea is to read all the information saved in a .sm4 file with MATLAB. 

The main code is contained in the file read_sm4.m and an example of how to call this function and plot the data is shown in read_files_sm4.m

In the folder devel_files there are some images and spectroscopy data to test the program (the files .SM4).
In addition there are some .txt files with raw data exported from the RHK proprietary software.

For writing the code I used some ideas from the Gwyddion project (http://gwyddion.net/) where I found rhk-sm4.c. 
The .log files where created by the Gwyddion program and were extremely helpful for writing the code.


----------------------
Created by Martín Caldarola (caldarola@df.uba.ar or caldarolamartin@gmail.com)
2012
----------------------


